<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>룰렛 이벤트</title>
<style>
  body {
    font-family: sans-serif;
    text-align: center;
    background: #f9f9f9;
    padding: 20px;
  }
  h1 {
    font-size: 2em;
    margin-bottom: 10px;
  }

  #roulette-container {
    margin: 50px auto;
    position: relative;
    width: 300px;
    height: 300px;
  }

  #wheel {
    width: 300px;
    height: 300px;
    border-radius: 50%;
    position: relative;
    border: 5px solid #333;
    transition: transform 4s cubic-bezier(0.33, 1, 0.68, 1);
    box-sizing: border-box;
    overflow: hidden;
  }

  /* 룰렛 내부를 4등분하기 위해 각도별로 다른 색상을 가진 원형 파이 형태 생성 */
  /* 간단히 background: conic-gradient를 이용해 구현할 수도 있음 */
  #wheel {
    background: conic-gradient(
      #ff6666 0deg 90deg,     /* 1등 구간 */
      #66b3ff 90deg 180deg,   /* 2등 구간 */
      #66ff66 180deg 270deg,  /* 3등 구간 */
      #ffc266 270deg 360deg   /* 4등 구간 */
    );
  }

  /* 포인터(화살표) */
  #pointer {
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    width: 0; 
    height: 0; 
    border-left: 15px solid transparent;
    border-right: 15px solid transparent;
    border-bottom: 20px solid #333;
  }

  button {
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
  }

  #result {
    margin-top: 20px;
    font-size: 1.2em;
    font-weight: bold;
    color: #333;
  }
</style>
</head>
<body>
<h1>룰렛 이벤트</h1>
<p>1등: 100권 시술권, 2등: 50만원 시술권, 3등: 1회 시술권, 4등: 최고급마스크팩</p>
<div id="roulette-container">
  <div id="pointer"></div>
  <div id="wheel"></div>
</div>
<button id="spinBtn">룰렛 돌리기</button>
<div id="result"></div>

<script>
  const wheel = document.getElementById('wheel');
  const resultDiv = document.getElementById('result');
  const spinBtn = document.getElementById('spinBtn');

  let isSpinning = false;
  
  spinBtn.addEventListener('click', () => {
    if (isSpinning) return; // 회전 중 중복 클릭 방지
    isSpinning = true;
    resultDiv.textContent = '';

    // 총 회전 각도 = (360 * 5회전 정도) + 랜덤(0 ~ 360)
    const extraSpins = 5; 
    const randomAngle = Math.floor(Math.random() * 360);
    const targetAngle = (360 * extraSpins) + randomAngle;

    // 회전 시작
    wheel.style.transform = `rotate(${targetAngle}deg)`;

    wheel.addEventListener('transitionend', () => {
      // 최종 각도 계산
      const finalAngle = targetAngle % 360;

      let prize;
      if (finalAngle >= 0 && finalAngle < 90) {
        prize = "1등 (100권 시술권)";
      } else if (finalAngle >= 90 && finalAngle < 180) {
        prize = "2등 (50만원 시술권)";
      } else if (finalAngle >= 180 && finalAngle < 270) {
        prize = "3등 (1회 시술권)";
      } else {
        prize = "4등 (최고급마스크팩)";
      }

      resultDiv.textContent = `당첨! 축하합니다. 당신의 당첨 상품: ${prize}`;

      // 다음 회전을 위해 transition 초기화 및 상태 리셋
      // 다음 회전 시 다시 transition을 적용하기 위해 약간의 트릭이 필요할 수 있으나
      // 여기선 간단히 isSpinning을 리셋해주기만 하면 됨.
      isSpinning = false;
    }, {once:true});
  });
</script>
</body>
</html>
